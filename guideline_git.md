# ガイドライン Git

## ブランチ

### master

- 本番環境用のブランチ
- 本番公開して問題ない状態のソースコードのみマージする  
- developからのマージを行うだけのブランチなので、masterに直接commitは行わない

### develop

- 開発用のブランチ
- masterからブランチを切って、リリース時にmasterにマージする

### feature

- 機能単位の開発用のブランチ
- issue or 1機能単位でdevelopからブランチを切る  
  複数の機能にまたがるブランチは、マージまでの時間が長くなり差分が増えることで、コンフリクトが起こりやすいため  
- すべての開発完了後にdevelopにマージし、ブランチを削除する

#### ブランチ名

##### GitHub issues開発

`issues/issue番号/開発機能/ユーザー名`

##### それ以外

`feature/開発機能`

## commit

- commitはこまめに行う
- マージ前にコミットの体裁を整えるとなお良い

### commitメッセージ

#### フォーマット

```
#issue番号 [Prefix] 変更内容の要約
空行
変更した理由
```

#### Prefix

下記4種類のPrefixを使用する。

- [add] （ファイルや機能の）追加
- [remove] （ファイルやコードの）削除
- [fix] （バグやミスの）修正
- [change] （仕様や機能の）変更
- [refactor] （ファイルやコードの）整理

## Pull Request（PR）

- PRは最初に作成する  
  開発着手前にWIPのPR（Draft PRだとなお良い）を作成することで、第三者が進捗を把握できる 
- PRは細かい単位で作成する  
  差分の多いPRはレビューに時間がかかるため、マージされるまでの間に別のPRがマージされ、コンフリクトが起こりやすくなる  
  featureを適切な粒度で切っていれば、1ブランチ＝1PRで問題ない
- コードフォーマッターを使用する
  インデントやスペースなど細かい差分が発生しなくなるのでレビューがしやすい

## フロー

1. masterからdevelopを切る
2. developから機能単位でfeatureを切って開発する
3. featureからdevelopへのWIPのPRを作成する
4. こまめにcommitする
5. （commitの体裁を整え、）同名のリモートブランチにpushする
6. すべての開発が完了しfeatureをdevelopへマージするとき、あるいはコードレビューをしてもらいたいときにPRのWIPを解除する
7. （必要ならコードレビューを通して）PRをマージする
8. 同名のリモートブランチも合わせてfeatureを削除する
10. ローカルのdevelopにPullする
11. 2へ戻る


## コンフリクト

- コンフリクトは起きないに越したことはない。  
  コンフリクト解消には人が介入するため、必要な変更が消えたり、不要な変更が残る可能性がある
- それぞれの変更点の意図や内容を確認した上で着手する  
